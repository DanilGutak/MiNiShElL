# Hold my beer ðŸº

## TODO:

- export, unset Ð½Ðµ Ð´Ð¾Ð»Ð¶Ð½Ð¾ Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ Ð² Ð¿Ð°Ð¹Ð¿Ð°Ñ… (VITALIK)
- Ð¿Ð²Ð´ Ð´Ð¾Ð»Ð¶Ð½Ð° Ð²Ð¸ÐºÐ¾Ñ€Ð¾ÑÑ‚Ð¾Ð²Ð¸Ð²Ð°Ñ‚ÑŒ getcwd Ð²Ð¼ÐµÑÑ‚Ð¾ env(done)
- exit codes for signals (done)
- fix heredocs (VITALIK)
- Norminette for parser(DONE)
- proper message for ambigious redirections(i dunno)
- dont expand if nearby heredoc(ass heredoc does not need expanded value)

- some tests(VITALIK)

- write descriptions for functions(DONE)
- replace all printf to printf_fd (DONE)
- add cleaning envp in case bash exits(DONE)
- turn exits into returns(DONE)



## CLEANER(??) after every rdln
- clean tokens(DONE)
- clean cmdtable(DONE)
- prepare path(?)
- ??

## LEXER(DONE?)
-	read quotes and normal text, check them(DONE(for real this time))
-	read pipes and redirs(DONE) (redo the redir check logic) (REDO PUTSYNTAX ERROR) (DONE)
-	protect memory(DONE)
-	check pipes and redirs(DONE)
-   changing exit code to 2 if syntax is wrong(DONE)

## EXPANDER (DONE)
- change $stuff in WORD and DQUOTE types to their values, need to get enviroment + additional enviroment

## PARSER(DONE)
- init command tables(DONE)
- put args together fo no_space == 1 (DONE)
- put cmd and args in variables(DONE)
- figure out redirs and them in struct(DONE)


 ## EXECUTOR
- open redirs (> lol > kek > pop)(DONE)
- trigger heredocs if anywhere (do expands(dont forget about "eof" does not expand))(VITALIK)
- set the fd for redir(last for in and last for out[not heredoc])(DONE)
- execute different part of pipes one after another(done)
- find executable for builtins(DONE)
- configure pipe for it(DONE)
- check exit codes of execve and set it accordingly(DONE)



## MISC:

- signals (DONE)

- builtins (DONE)

    â—¦ echo with option -n

    â—¦ cd with only a relative or absolute path

    â—¦ pwd with no options

    â—¦ export with no options

    â—¦ unset with no options

    â—¦ env with no options or arguments

    â—¦ exit with no options (DONE)

- add history (DONE)



## NOTES
- bash is stupid
## finding executable
- searches from left to right in path variables
- if finds check whether executable if not go further until the end.
- BUT if noone is executable return 1st is run and permision denied is returned

The shell reads its input from a file, from a string or from the user's terminal.

Input is broken up into words and operators, obeying the quoting rules, see Chapter 3. These tokens are separated by metacharacters. Alias expansion is performed.

The shell parses (analyzes and substitutes) the tokens into simple and compound commands.

Bash performs various shell expansions, breaking the expanded tokens into lists of filenames and commands and arguments.

Redirection is performed if necessary, redirection operators and their operands are removed from the argument list.

Commands are executed.

Optionally the shell waits for the command to complete and collects its exit status.
## Useful links

https://www.maizure.org/projects/decoded-gnu-coreutils/

https://tldp.org/LDP/Bash-Beginners-Guide/html/sect_01_04.html

https://www.gnu.org/software/bash/manual/bash.html#Command-Search-and-Execution
